# æ¦‚è¦
- class2apiå¸®åŠ©ä½ æŠŠJavascript Classç±»çš„é™æ€æ–¹æ³•è‡ªåŠ¨å‘å¤–æ˜ å°„ä¸ºAPIæŽ¥å£çš„å¾®åž‹æ¡†æž¶ï¼Œå€ŸåŠ©class2apiï¼Œä½ å¯ä»¥åœ¨1åˆ†é’Ÿä¹‹å†…ç›´æŽ¥å¼€å§‹ç€æ‰‹äºŽä¸šåŠ¡é€»è¾‘ä»£ç çš„ç¼–å†™ï¼Œè€Œå°†è·¯ç”±ã€æ–¹æ³•ç¼“å­˜ã€ç½‘ç»œé€šè®¯ç­‰äº‹åŠ¡äº¤ç»™æˆ‘ä»¬å¤„ç†
- class2apiæš´éœ²çš„APIæŽ¥å£ä»…ä»¥postæ–¹å¼æä¾›è¯·æ±‚æœåŠ¡ï¼ˆæ³¨æ„ï¼šä¸æ”¯æŒgetç­‰å…¶ä»–æ–¹å¼ï¼ï¼‰
- ä½œä¸ºå¾®æœåŠ¡ï¼Œä½¿ç”¨å†…ç½®Expressæ—¶ï¼Œclass2apiä¸å¼€å¯sessinã€‚ï¼ˆæ³¨ï¼šå½“ä½¿ç”¨createServerInRouteræŒ‚è½½åˆ°çŽ°æœ‰çš„Expressåº”ç”¨ä¸‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å®¿ä¸»Expresså®žä¾‹çš„sessionæœºåˆ¶ï¼‰


# å¿«é€Ÿè¿è¡Œæºç Demoï¼š

- å¿«é€Ÿå®‰è£…ä¾èµ–ç»„å»º
```
$ npm i 
æˆ–
$ npm i --registry=https://registry.npm.taobao.org 
```

- åŸºäºŽæºç ç‰ˆæœ¬è¿è¡ŒDemoåº”ç”¨(ç‹¬ç«‹Serverç‰ˆæœ¬)
```
$ npm run start:src 
```

- åŸºäºŽæºç ç‰ˆæœ¬è¿è¡ŒDemoåº”ç”¨(ExpressRouterè·¯ç”±æŒ‚è½½ç‰ˆæœ¬)
```
$ npm run start:srcrouter
```

- è¿è¡Œå•å…ƒæµ‹è¯•ï¼ˆå…ˆè¿è¡ŒDemoåº”ç”¨ï¼‰
```
$ mocha test/test.run
```

# è¿è¡Œè¾ƒå¤æ‚çš„ç¤ºä¾‹é¡¹ç›®ï¼š
æŒ‰ä»¥ä¸‹æ­¥éª¤è¿è¡Œæºç ä¸­è¾ƒå¤æ‚çš„ç¤ºä¾‹é¡¹ç›®ï¼Œå®ƒå¸¦æœ‰sequelize-ORMã€APIè‡ªåŠ¨ç¼“å­˜ã€ç®¡ç†èº«ä»½ä¸Žæƒé™æ ¡éªŒç­‰é«˜é˜¶åœºæ™¯
- åœ¨æœ¬åœ°åˆ›å»ºåä¸ºgankao_demo123çš„mysqlæ•°æ®åº“
- æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
```
$ FORCE=0 DB_RESET_1=123234537569 DB_RESET_2=wrq5hfoiuy12344376 node toolscript/resetDB.run.js
```
- åœ¨æºç æ ¹ç›®å½•ä¸‹ï¼Œè¿›å…¥nodeç¤ºä¾‹é¡¹ç›®å¹¶æ‰§è¡Œ
```
$ cd example/superProject_redis_cache_sequelize/ 
$ npm i 
$ npm run start
```
- æ‰§è¡Œå¯¹åº”ç¤ºä¾‹é¡¹ç›®çš„å•å…ƒæµ‹è¯•
```
$ cd example/superProject_redis_cache_sequelize/ 
$ npm i mocha -g
$ mocha test/test.run -t 5000
```
å¦å¤–ï¼Œæºç ä¸­è¿˜æœ‰ä¸€ä¸ªåˆçº§çš„ç¤ºä¾‹é¡¹ç›®å¯ä¾›å‚è€ƒï¼Œä½äºŽ/example/baseProject

# å¿«é€Ÿåˆ›å»ºåº”ç”¨çš„ä»£ç 

## åˆ›å»ºä¸€ä¸ªä¸šåŠ¡ç±»ClassA.js
```javascript
    //ClassA.js
    class ClassA {
        static async hello({name}) {
            return {message: `this is a message from Api: got name [${name}]`}
        }
    } 
    export default ClassA
```

## æžé€Ÿåˆ›å»ºå¾®æœåŠ¡
```javascript
    //server.js
    import {createServer} from 'class2api'
    import ClassA from './ClassA'
    
    //åˆ›å»ºå¾®æœåŠ¡å¯¹è±¡
    createServer({
        modelClasses: [{model: ClassA, as: 'a'}],
        beforeCall:async ({req, params, modelSetting})=>{
            return params
        }
    }).then((server)=>{  
        server.listen(3002, "0.0.0.0", function onStart(err){
            if (err)console.log(err)
            console.info("==> ðŸŒŽ Listening on port %s. Open up http://0.0.0.0:%s/ in your browser.", port, port);
        });
    }).catch((error)=>{
        setTimeout(function(){throw error})
    })
``` 

çŽ°åœ¨ï¼Œå°±å¯ä»¥è®¿é—®æœåŠ¡æŽ¥å£ï¼š
```
$ curl -d 'name=huangyong' 'http://127.0.0.1:3002/a/hello'
```

# ä¸šåŠ¡é™æ€ç±»çš„ç¼–å†™çº¦å®šä¸Žæœ€ä½³å®žè·µï¼š
- ç±»åéœ€ä¸ºå‘½åç±»ï¼Œä¸èƒ½åŒ¿å
- ä¸šåŠ¡é™æ€ç±»ï¼Œä¸èƒ½æ‹¥æœ‰å®žä¾‹æ–¹æ³•ï¼ˆé€šå¸¸å…¶å®žä¹Ÿæ²¡æœ‰éœ€æ±‚å’Œåœºæ™¯ï¼‰ï¼Œæ‰€ä»¥è¯·å‚è€ƒå®˜æ–¹ä»£ç ï¼Œåœ¨æž„é€ å™¨ä¸­throwå¼‚å¸¸ï¼Œä»¥ç¡®ä¿ä¸šåŠ¡é™æ€ç±»ä¸ä¼šè¢«å®žä¾‹åŒ–
- ç±»é™æ€æ–¹æ³•å®žçŽ°å„ä¸šåŠ¡é€»è¾‘ï¼Œä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€ä¸ªä¸šåŠ¡é€»è¾‘
- ç±»é™æ€æ–¹æ³•åªæœ‰ä¸€ä¸ªå½¢å‚ï¼Œå¹¶ä»¥ES6å¯¹è±¡è§£æž„çš„æ–¹å¼ä¹¦å†™ï¼Œè°ƒç”¨ä»£ç å¯ä»¥èŽ·å¾—å‘½åå‚æ•°å½¢å¼çš„å¯è¯»æ€§ç›Šå¤„
- ç±»é™æ€æ–¹æ³•çš„å‚æ•°ï¼ˆé¦–ä¸ªå‚æ•°ï¼‰ä¸­ï¼Œæ¡†æž¶è¿˜æ³¨å…¥äº†å‡ ä¸ªå±žæ€§ï¼š**req**ï¼šå½“å‰çš„è¯·æ±‚ä¿¡æ¯å¯¹è±¡ï¼Œexpressçš„æ ‡å‡†requestï¼Œä¾›æ–¹æ³•å†…éƒ¨è¯»å–ï¼›**uID**ï¼šç”¨æˆ·çš„å”¯ä¸€ç¼–ç ï¼Œå½“modelSettingä¿®é¥°å™¨ä¸­æŒ‡å®šçš„èº«ä»½éªŒè¯å‡½æ•°ï¼ˆ__Authï¼‰è¿è¡Œé€šè¿‡æ—¶å‡ºçŽ°ï¼›**__nocache**ï¼šè°ƒç”¨æ–¹ä¼ å…¥çš„ç‰¹æ®ŠæŒ‡ä»¤ï¼Œå½“__nocacheæœ‰å€¼æ—¶ï¼ŒcacheAbleä¿®é¥°å™¨å†…éƒ¨ä¼šåœ¨æœ¬æ¬¡è¯·æ±‚ä¸­å¿½ç•¥cacheAbleç¼“å­˜ç­–ç•¥ï¼Œç»§ç»­è¿è¡Œæ–¹æ³•ã€‚
- ä¸ºäº†å¢žåŠ APIè¿”å›žæ•°æ®å€¼çš„å¯æ‰©å±•èƒ½åŠ›ï¼Œç±»é™æ€æ–¹æ³•çš„è¿”å›žå€¼å¿…é¡»ç”¨å¯¹è±¡å½¢å¼ï¼Œä¸èƒ½ä½¿ç”¨å­—ç¬¦ä¸²ã€æ•´æ•°ã€æµ®ç‚¹ã€å¸ƒå°”ç­‰ç®€å•å€¼ç±»åž‹ã€‚
- æŸäº›åœºæ™¯ï¼Œåªéœ€è¦APIè¿”å›žæ“ä½œæ˜¯å¦æˆåŠŸçš„ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®çš„GKSUCCESS([props])å‡½æ•°ï¼Œå®ƒå°è£…ä¸€ä¸ªç®€å•ç»“æž„{success: true,...props}ï¼Œå…¶ä¸­propså‚æ•°æ˜¯é™„åŠ ä¿¡æ¯ï¼Œå½“propsæ˜¯å¯¹è±¡æ—¶ï¼Œè‡ªåŠ¨æ‰©å±•åˆ°ç»“æž„é‡Œï¼Œå½“propsæ˜¯éžå¯¹è±¡æ—¶ï¼Œä»¥msgå±žæ€§æ‰©å±•åˆ°ç»“æž„é‡Œ
```javascript
    import {GKSUCCESS} from 'class2api'
    class ClassA {
        constructor() {
            throw 'é™æ€ä¸šåŠ¡åŠŸèƒ½ç±»æ— æ³•å®žä¾‹åŒ–'
        }
        static async hello({name}) {
            return {message: `this is a message from Api: got name [${name}]`}
        }
        static async deleteArticle({name}) {
            //TODO:...åˆ é™¤æ–‡ç« çš„æ“ä½œ
            return GKSUCCESS()
        }
    }
    export default ClassA
```

# æŽ¥å£è¿”å›žå€¼çš„ç»“æž„
class2apiå¯¹æ‰€æœ‰è¯·æ±‚çš„è¿”å›žæ•°æ®ç»“æž„ï¼Œç»Ÿä¸€ä¸ºï¼š
```javascript
{  
    err,
    result
}
```
å…¶ä¸­errä»£è¡¨å†…éƒ¨å¼‚å¸¸æˆ–é”™è¯¯ï¼Œå‡¡æ˜¯GKErrorså’ŒGKErrorWrap resultæŠ›å‡ºçš„é”™è¯¯éƒ½ä¼šæ•æ‰err ï¼Œè€Œresultä¿å­˜çš„æ˜¯ä¸šåŠ¡ç±»é™æ€æ–¹æ³•çš„æ‰§è¡Œè¿”å›žç»“æžœï¼Œä¸”çº¦å®šä¸ºå¿…é¡»ä¸ºå¯¹è±¡ç»“æž„ï¼Œä¸èƒ½æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ç­‰ç®€å•æ•°æ®ç±»åž‹

*ç‰¹æ®Šæƒ…å†µï¼šå¦‚æžœä½ çš„ç³»ç»Ÿæœ‰ç‰¹æ®ŠåŽŸå› ï¼Œéœ€è¦æŽ¥å£è¿”å›žè‡ªå®šä¹‰çš„æ•°æ®ç»“æž„ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ¥æŽ§åˆ¶åè½¬ï¼š
```javascript
    class ClassB {
        constructor() {
            throw 'é™æ€ä¸šåŠ¡åŠŸèƒ½ç±»æ— æ³•å®žä¾‹åŒ–'
        }
        static async customResponseResultStruck() {
            //TODO:.....
    
            //class2apiå†…éƒ¨çº¦å®šï¼Œå¦‚APIæ–¹æ³•è¿”å›žçš„æ˜¯Functionï¼Œåˆ™æ¡†æž¶ä¼šè°ƒç”¨å‡½æ•°å¹¶æŠŠå…¶è¿è¡Œç»“æžœè¿”å›žç»™å®¢æˆ·ç«¯ï¼Œä»¥å®žçŽ°è‡ªå®šä¹‰ç‰¹æ®Šçš„responseç»“æž„
            return () => {
                return {data: {name: 'huangyong'}, errorCode: 123}
            }
        }
    }
```

# å¯åŠ¨çŽ¯å¢ƒå˜é‡æŽ§åˆ¶  
- $ process.env.NO_API_CACHE=1  å¼ºåˆ¶å…³é—­é™æ€ç±»çš„APIè°ƒç”¨ç¼“å­˜ï¼Œä½¿cacheAbleã€clearCacheå¤±æ•ˆ
- $ process.env.SQL_PRINT=1     å¼€å¯sequelizeçš„SQLæ‰§è¡Œæ—¥å¿—çš„æ‰“å°


# ç»„ä»¶æä¾›çš„åŠŸèƒ½å‡½æ•°

## ç©ºé—´åˆ—è¡¨
- class2api             ä¸»ç©ºé—´ï¼Œæä¾›å¾®æœåŠ¡åˆ›å»ºã€ç¼“å­˜ä¿®é¥°å™¨ã€redisé…ç½®/è®¿é—®ç­‰åŸºç¡€å¥—ä»¶
- class2api/dbhelper    sequelizeæ¨¡åž‹åˆ›å»ºä¸Žç®¡ç†çš„åŠ©æ‰‹å‡½æ•°ç©ºé—´ï¼Œå¯ç®€åŒ–modelçš„å£°æ˜Žä¸Žå¼•ç”¨
- class2api/rulehelper  ç®¡ç†åŽå°ä¸“ç”¨çš„èº«ä»½æ£€éªŒã€æƒé™æ ¡éªŒ
- class2api/testhelper  æµ‹è¯•ç›¸å…³çš„è¾…åŠ©å¥—ä»¶ï¼Œå¿«é€Ÿæ‰§è¡ŒåŸºäºŽhttpæŽ¥å£è°ƒç”¨çš„å•å…ƒæµ‹è¯•ï¼Œä»¥åŠæ”¶é›†å•å…ƒæµ‹è¯•çš„è¯·æ±‚ä¸Žç»“æžœjsonå¿«ç…§ï¼Œå¹¶åœ¨mochaçš„afteræ‹¦æˆªä¸­ä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œä»¥ä½œä¸ºæ–‡æ¡£å‚è€ƒ
- class2api/gkerrors    å¸¸ç”¨çš„é¢„è®¾é”™è¯¯ç±»åž‹

## class2api    ä¸»ç©ºé—´
- createServer(opts)
åˆ›å»ºæœåŠ¡å™¨(ä½¿ç”¨å†…å»ºçš„ç‹¬ç«‹Expresså®žä¾‹) ,optsä¸ºå‚æ•°é¡¹ï¼Œå…·ä½“å¦‚ä¸‹ï¼š
```javascript
    createServer({
        config:{
           apiroot:'/', //[å¯é€‰]ï¼ŒæŒ‚è½½å¾®æœåŠ¡çš„æ ¹è·¯å¾„ï¼Œå¦‚ï¼šapirootè®¾ç½®ä¸º'apiv1"ï¼Œåˆ™ä¸šåŠ¡ç±»ClassAçš„method1æ–¹æ³•å¯¹åº”çš„è®¿é—®å…¥å£ä¸º: http://yourdomain/apiv1/classa/method1
           redis,       //[å¯é€‰]ï¼Œå†…ç½®APIæ–¹æ³•ç¼“å­˜æ‰€ä½¿ç”¨çš„rediså®žä¾‹é…ç½®å‚æ•°ï¼Œä½¿ç”¨clearCacheã€cacheAbleä¿®é¥°å™¨æ—¶å¿…é¡»
           cros:true,   //[å¯é€‰]ï¼Œæ˜¯å¦å…è®¸è·¨åŸŸè®¿é—®
           cros_headers:[], //[å¯é€‰]ï¼Œå…è®¸è·¨åŸŸè®¿é—®æ—¶çš„headersç™½åå•
           cros_origin:[],  //[å¯é€‰]ï¼Œå…è®¸è·¨åŸŸè®¿é—®æ—¶çš„æŽˆæƒæºé…ç½®ï¼Œé»˜è®¤ä¸º*ã€‚å½“ä¼ å…¥æœ‰æ•ˆçš„cros_originå‚æ•°æ—¶ï¼Œä»¥cros_originä¸­æŒ‡å®šçš„ä¸ºå‡†
           frontpage_default: ''    //[å¯é€‰]ï¼Œæ”¾åœ¨APIæ–¹æ³•å†…éƒ¨èŽ·å–å‰ç«¯çš„åŸŸåï¼Œä¸Žä»Žå‰ç«¯è¯·æ±‚ä¼ è¿‡æ¥headerä¸­çš„frontpageåˆå¹¶ï¼Œä¼˜å…ˆèŽ·å–å®¢æˆ·ç«¯çš„ï¼Œå…¶å®žé‡‡ç”¨æ­¤é»˜è®¤å€¼ã€‚æœ€åŽå°è£…ä¸ºæ ‡å‡†urlå¯¹è±¡å¹¶ç»‘å®šåˆ°APIæ–¹æ³•å›žè°ƒçš„paramså¯¹è±¡çš„___frontpageURLå±žæ€§ä¸Š
        }, 
        modelClasses,   //å¿…éœ€ï¼Œæ˜ å°„çš„ä¸šåŠ¡ç±»åˆ—è¡¨ï¼Œå¦‚:[ClassA, {model:XXX,as:'abc'}]ï¼Œå»ºè®®ä»¥mode-asçš„æ–¹å¼ä¿®æ”¹ä¸šåŠ¡ç±»æš´éœ²çš„è®¿é—®è·¯å¾„ï¼Œä»¥éšè—å®žé™…çš„ç±»å‘½åï¼ˆå»ºè®®ï¼‰
        beforeCall,     //[å¯é€‰]ï¼ŒAPIæŽ¥å£è¯·æ±‚ä¹‹å‰çš„æ‹¦æˆªäº‹ä»¶ï¼Œå¯ä»¥ä¿®æ”¹ã€ç›‘å¬postä¿¡æ¯ï¼Œä»¥åŠèº«ä»½çš„éªŒè¯åˆ¤æ–­
        afterCall,  //[å¯é€‰]ï¼ŒAPIæŽ¥å£è¯·æ±‚å®ŒæˆåŽçš„æ‹¦æˆªäº‹ä»¶ï¼Œå¯ä»¥ä¿®æ”¹ã€ç›‘å¬è¿”å›žç»“æžœï¼Œå…¸åž‹åœºæ™¯å°±æ˜¯è®°å½•è¯·æ±‚çš„æ—¥å¿—
        custom:(expressInstence)=>{ 
            return expressInstence
        },          //[å¯é€‰]ï¼Œå¯¹expressInstenceå®žä¾‹è¿›è¡Œè‡ªå®šä¹‰æ‰©å±•ï¼Œæ³¨ï¼šå¾®æœåŠ¡é€šå¸¸æ˜¯æ— çŠ¶æ€çš„ï¼Œæ‰€ä»¥ä¸å»ºè®®å¢žåŠ sessionæœºåˆ¶
        method404       //[å¯é€‰]ï¼Œè‡ªå®šä¹‰çš„expressçš„è·¯ç”±ä¸­é—´ä»¶ï¼Œåœ¨404åœºæ™¯æ—¶ï¼Œå¯è¾“å‡ºè‡ªå·±å®šåˆ¶çš„è¿”å›žå€¼
    })
```

- createServerInRouter(opts)
åˆ›å»ºæœåŠ¡å™¨(ä½¿ç”¨å¤–éƒ¨çš„Expressï¼Œåªè¿”å›žrouterä¾›ç»‘å®šè·¯ç”±)ï¼Œoptså‚æ•°ä¸ŽcreateServerå‡½æ•°åŸºæœ¬ç›¸åŒï¼Œé™¤äº†è‡ªåŠ¨å¿½ç•¥customå‚æ•°ã€‚å¯å‚è€ƒé¡¹ç›®ä¸­çš„server-router.jsæºç 

- setting_redisConfig
è®¾ç½®å†…ç½®redisçš„è¿žæŽ¥å‚æ•°ï¼Œå› ä¸ºè€ƒè™‘åˆ°importå£°æ˜Žè‡ªåŠ¨æå‰çš„é—®é¢˜ï¼Œä¸ºç¡®ä¿å…¶ä»–è‡ªå®šä¹‰ä¸šåŠ¡ç±»å†…éƒ¨åˆå§‹åŒ–æ—¶ä¾èµ–rediså®žä¾‹çš„åœºæ™¯ã€‚å»ºè®®çš„ï¼Œæœ€ä½³æ–¹æ³•æ˜¯å®šä¹‰ä¸ªç‹¬ç«‹çš„init.jsï¼Œå¹¶åœ¨server.jsé¡¶éƒ¨ç¬¬ä¸€è¡Œå¼•ç”¨
```javascript
//init.js
import {setting_redisConfig} from 'class2api'
setting_redisConfig({
    host: "127.0.0.1",
    port: 6379,
    cache_prefx:'dev_class2api_',//å¿…é¡»çš„å‚æ•°ï¼Œä¸”é’ˆå¯¹æ¯ä¸ªåº”ç”¨ä¸åŒé…ç½®ï¼Œä»¥é¿å…å„åº”ç”¨ä¹‹é—´å‘ç”Ÿkeyç¢°æ’žä¸Žè¦†ç›–
    defaultExpireSecond:10*60   //å¯ç¼ºçœï¼Œclass2apiå†…éƒ¨çš„é»˜è®¤æ··å­˜æ—¶é•¿ä¸º1åˆ†é’Ÿï¼Œå¯è‡ªå®šä¹‰
})
```

- getRedisClient
èŽ·å¾—redisè®¿é—®å®žä¾‹ï¼Œä»¥è¿›è¡Œç›´æŽ¥è¯»å–æ“ä½œã€‚æ³¨ï¼šè¯»å†™æ—¶ï¼Œåœ¨redisä¸­å®žé™…å­˜å–çš„keyä¼šæºå¸¦redisé…ç½®ä¸­cache_prefxå±žæ€§å®šä¹‰çš„å‰ç¼€
```javascript
    let cache = getRedisClient()
    cache.set('keyABC','this is message!', (err,data)=>{})
    await cache.setAsync('keyABC','this is message!')
```

- GKErrorWrap
é”™è¯¯åŒ…è£…å™¨ï¼Œä»¥å¿«é€Ÿåˆ›å»ºä»¥ä¸‹çº¦å®šç»“æž„çš„é”™è¯¯ä¿¡æ¯ï¼š
```javascript
return {
           _gankao: 1,//å›ºå®šæ ‡å¿—ä½ï¼Œä»¥åŒºåˆ«æ™®é€šçš„errorå¯¹è±¡
           code: errCode,//é”™è¯¯ç ï¼Œå†…ç½®é”™è¯¯ç±»åž‹ä¸ºè´Ÿæ•°ï¼Œé€šè¿‡GKErrorWrapè‡ªå®šä¹‰çš„codeè¯·åŠ¡å¿…ä¸ºæ­£æ•°
           message: `...`,//é”™è¯¯ä¿¡æ¯
           more: ''//è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
       }
``` 

- modelSetting(props)
ç±»ä¿®é¥°å™¨ï¼Œå°†ä¼ å…¥çš„propså¯¹è±¡èµ‹å€¼åˆ° Class.__modelSetting ä¸Šï¼Œç›®å‰class2apiå†…éƒ¨çº¦å®šçš„porpså±žæ€§æœ‰ï¼š
**__Auth**:Functionï¼Œä¸Žä¸šåŠ¡ç±»ç›¸å…³çš„èº«ä»½éªŒè¯å‡½æ•°ï¼Œå†…éƒ¨è¿›è¡Œèº«ä»½åˆ¤æ–­ï¼Œå¹¶è¿”å›žå¸¦æœ‰uIDçš„ç”¨æˆ·ä¿¡æ¯å¯¹è±¡
**__ruleCategory**:{name//æƒé™ç»„åç§°,desc//æƒé™ç»„çš„å¤‡æ³¨æè¿°}ï¼Œ
```javascript
    import {parseAdminAccountFromJWToken} from "class2api/rulehelper";
    @modelSetting({
        __Auth:async ({req})=>{
            //åŽå°çš„ç”¨æˆ·éªŒè¯ï¼Œè§£æžheaderä¸­çš„jwtokenä¿¡æ¯ï¼Œè°ƒç”¨class2api/rulehelperçš„è§£æžï¼Œæ³¨æ„ä¸ŽéžåŽå°å¸¸è§„ç”¨æˆ·éªŒè¯çš„åŒºåˆ«
            let jwtoken = req.header('jwtoken') || ''
            return await parseAdminAccountFromJWToken({jwtoken})
        },
        __ruleCategory:{
            name:"æ–‡ç« ç®¡ç†",
            desc:"å¯¹æ–‡ç« è¿›è¡Œæ–°å»ºã€ç¼–è¾‘ã€åˆ é™¤ç­‰æ“ä½œ"
        }
    })
    class ArticleManager {
        constructor() {
            throw 'é™æ€ä¸šåŠ¡åŠŸèƒ½ç±»æ— æ³•å®žä¾‹åŒ–'
        }
    }
```

- cacheAble({cacheKeyGene:()=>{}})     
ç±»é™æ€æ–¹æ³•ä¿®é¥°å™¨,å¯¹ä¿®é¥°çš„APIæ–¹æ³•çš„è°ƒç”¨ç»“æžœè¿›è¡Œç¼“å­˜ï¼Œç¼“å­˜çš„keyç”±cacheKeyGeneå‡½æ•°è¿è¡Œæ—¶åŠ¨æ€è¿”å›žæŒ‡å®š
```javascript
    class GKModelA {
    
        @cacheAble({
            cacheKeyGene: ({name}) => {
                return `getArticle-${name}`
            }
        })
        static async getArticle({uID, name}) { 
            return {message: `getArticle.${name}ï¼Œfrom user. ${uID}`}
        }
    }
```
*Qï¼šå¦‚ä½•åˆ¤æ–­æŸæ¬¡APIè¯·æ±‚çš„ç»“æžœæ˜¯å‘½ä¸­äº†ç¼“å­˜ï¼Ÿ*
Aï¼šå‘½ä¸­äº†ç¼“å­˜çš„è°ƒç”¨ï¼Œåœ¨å…¶è¯·æ±‚çš„è¿”å›žç»“æžœä¸­ï¼Œå¸¦æœ‰__fromCache=1å±žæ€§ï¼Œå¦‚ï¼š
```javascript
{
    err:null,
    result:{name:'huangyong'},
    __fromCache:1 //é¢å¤–çš„è¾“å‡ºæ ‡è®°
}
```

*Qï¼šå¦‚æžœéœ€è¦åœ¨æŸæ¬¡è°ƒç”¨æŽ¥å£æ—¶å¼ºåˆ¶ç¦ç”¨ï¼ˆç»•è¿‡ï¼‰APIç¼“å­˜æœºåˆ¶ï¼Ÿ*
Aï¼šä¼ å…¥__nocache=1å‚æ•°ï¼Œç»„ä»¶å†…éƒ¨å³ä¼šåˆ¤æ–­å¹¶ç»•è¿‡ç¼“å­˜ï¼Œç¤ºä¾‹å¦‚ï¼š
```javascript
        let options = {
            uri: remote_api,  
            body: {
                fID:123,
                __nocache:1
            },
            json: true, 
        }
        let {body} = await request.postAsync(options)
```

- clearCache({cacheKeyGene:()=>{}}) 
ç±»é™æ€æ–¹æ³•ä¿®é¥°å™¨, å®žçŽ°åœ¨APIè¯·æ±‚å®Œæˆä¹‹åŽæ¸…ç©ºæŒ‡å®škeyçš„ç¼“å­˜ï¼Œåˆ é™¤çš„keyç”±cacheKeyGeneå‡½æ•°è¿è¡Œæ—¶åŠ¨æ€è¿”å›žæŒ‡å®šï¼›å¦‚æžœéœ€è¦æ¸…é™¤å¤šä¸ªkeyï¼Œå¯ä»¥ç”¨åè½¬æŽ§åˆ¶çš„æ–¹å¼ï¼Œäº¤ç»™ç±»é™æ€æ–¹æ³•å†…éƒ¨æ¥å¤„ç†ï¼Œå½“cacheKeyGeneå‡½æ•°è¿”å›ž''ç©ºå­—ç¬¦ä¸²ï¼Œä¼šå¼€å¯åè½¬æŽ§åˆ¶æ¨¡å¼ï¼Œä¿®é¥°å™¨å†…éƒ¨ä¼šåœ¨ç±»é™æ€æ–¹æ³•çš„ç¬¬ä¸€ä¸ªè°ƒç”¨å‚æ•°ï¼ˆæŒ‰çº¦å®šï¼Œç±»é™æ€æ–¹æ³•ä½¿ç”¨ç¬¬ä¸€ä¸ªå¤åˆå¯¹è±¡èŽ·å–æ‰€æœ‰çš„å‚æ•°ï¼‰ä¸­å¢žåŠ __cacheManageå±žæ€§ï¼Œ__cacheManageæ˜¯ä¸€ä¸ªè½»é‡cacheè®¿é—®å™¨ï¼Œæä¾›get(akey)ã€set(akey, avalue, expireTimeSeconds)ã€delete(akey)ä¸‰ä¸ªæ–¹æ³•ã€‚
```javascript
    //å¸¸è§„çš„æŽ§åˆ¶æ–¹å¼
    class GKModelA {
        @clearCache({
            cacheKeyGene: (args) => {
                let {aID} = args[0]
                return `article-${aID}`
            }
        })
        static async deleteArticle({aID}) {
            //...
            return GKSUCCESS()
        }
    }
    
    //éœ€è¦æ¸…é™¤å¤šä¸ªå…³è”keyæ—¶ï¼Œå¯ä½¿ç”¨åè½¬æŽ§åˆ¶æœºåˆ¶
    class GKModelA {
        @clearCache({
            cacheKeyGene: (args) => { 
                return ''
            }
        })
        static async deleteArticle({aID, __cacheManage}) {
            //...
            if(__cacheManage){
                await __cacheManage.delete(`article-${aID}`) //åˆ é™¤æ–‡ç« ç¼“å­˜
                await __cacheManage.delete(`articleCategory-1`) //åˆ é™¤æ–‡ç« ç±»åˆ«çš„ç¼“å­˜
            }
            return GKSUCCESS()
        }
    }
    
```

- crashAfterMe(hintMsg)  ä¿®é¥°å™¨,è¿è¡Œå®Œç±»æ–¹æ³•å°±äººä¸ºæŠ›å‡ºå¼‚å¸¸ä¸­æ–­ç¨‹åºï¼Œè°ƒè¯•ç”¨ï¼Œç”Ÿäº§çŽ¯å¢ƒä¸‹è‡ªåŠ¨å¤±æ•ˆ

## class2api/gkerrors   å¸¸ç”¨é¢„è®¾çš„é”™è¯¯ï¼ˆcodeå€¼ä¸ºè´Ÿæ•°ï¼‰
- GKErrors  é¢„è®¾é”™è¯¯æœ‰ï¼š
```javascript
    import {GKErrors} from 'class2api/gkerrors' 
    GKErrors._TOKEN_PARSE_FAIL      //tokenè§£æžå¤±è´¥ 
    GKErrors._RULE_VALIDATE_ERROR   //æƒé™è®¤è¯è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸
    GKErrors._TOKEN_LOGIN_INVALID   //è¯·å…ˆç™»å½•
    GKErrors._NOT_ACCESS_PERMISSION //æ— è®¿é—®æƒé™
    GKErrors._NOT_SERVICE       //åŠŸèƒ½å³å°†å®žçŽ°
    GKErrors._PARAMS_VALUE_EXPECT//å‚æ•°ä¸ç¬¦åˆé¢„æœŸ
    GKErrors._NO_RESULT         //æ— åŒ¹é…ç»“æžœ
    GKErrors._SERVER_ERROR      //æœåŠ¡å‘ç”Ÿå¼‚å¸¸
    GKErrors._NOT_PARAMS        //ç¼ºå°‘å‚æ•°
```

## class2api/dbhelper
sequelizeæ¨¡åž‹åˆ›å»ºä¸Žç®¡ç†çš„åŠ©æ‰‹å‡½æ•°ç©ºé—´ï¼Œå¯å‚è€ƒé¡¹ç›®ä¸­çš„tableloader.jsç¤ºä¾‹æ–‡ä»¶

- TableSetting  
sequelizeModelå®šä¹‰modelæ—¶çš„å‡ ä¸ªæ‰©å±•è®¾ç½®ï¼ŒåŒ…æ‹¬ï¼š
1ã€TableSetting.tabelOptionè®¾ç½®ï¼Œå«modelçš„å‡ ä¸ªé»˜è®¤è®¾ç½®ï¼Œparanoidé»˜è®¤ä¸ºtrueï¼Œæ—¶é—´ç›¸å…³å­—æ®µåå®šä¹‰ä¸ºcreated_atã€updated_atã€deleted_atï¼Œå­—ç¬¦é›†collateä¸ºutf8_general_ci
2ã€TableSetting.extendDateTimeVirtualFields(DataTypes, [customfields])è®¾ç½®ï¼Œä¸ºæ—¶é—´å­—æ®µæ‰©å±•å‡ºå¯è¯»æ€§å¼ºçš„æ—¶é—´æ ¼å¼åŒ–åŽçš„è™šå­—æ®µï¼Œåç§°çº¦å®šä¸º'*****_display'ï¼Œè®¾ç½®å†…é»˜è®¤ä¸ºcreated_atã€updated_atæ‰©å±•ï¼Œç¬¬äºŒä¸ª[customfields]å‚æ•°è¿½åŠ éœ€è¦æ‰©å±•æ ¼å¼åŒ–çš„è‡ªå®šä¹‰æ—¶é—´å­—æ®µ
```javascript
    //DemoUser.js
    import {TableSetting} from 'class2api/dbhelper';
    
    export default (sequelize, DataTypes)=> {
        const User = sequelize.define('demouser', {
            name: {type: DataTypes.STRING, allowNull: false, defaultValue: '', comment: `ç”¨æˆ·çš„å§“å`},
            birthday: {type: DataTypes.DATE},
            ...TableSetting.extendDateTimeVirtualFields(DataTypes, ['birthday'])
        }, {
            ...TableSetting.tabelOption,
            classMethods: {
                associate: function (DataModel, ass) {
                    //User.belongsTo(DataModel.Student)
                }
            },
            comment: 'å­¦ç”Ÿä¿¡æ¯'
        });
        return User;
    }
```
- ResetDB   
é‡ç½®æ•°æ®åº“ï¼Œå³æ‰§è¡Œsequelize.sync({force: (process.env.FORCE=="1")})ï¼Œå†…éƒ¨æœ‰å¯åŠ¨çŽ¯å¢ƒå˜é‡çš„æ ¡éªŒï¼Œåªæœ‰å½“ä¼ å…¥çš„å¯åŠ¨çŽ¯å¢ƒå˜é‡ä¸Žconfigä¸­mysql.reset_keyçš„{key1,key2}ç›¸ç¬¦æ—¶æ‰æ‰§è¡Œã€‚é»˜è®¤ä¸ºè½¯é‡ç½®ï¼Œå¯ä»¥é€šè¿‡ä¼ å…¥FORCE=1çš„å¯åŠ¨çŽ¯å¢ƒå˜é‡æ¥å¼ºåˆ¶é‡ç½®

- DBModelLoader 
åŠ è½½Modelå®šä¹‰æ–‡ä»¶, å‚è€ƒç¤ºä¾‹é¡¹ç›®ä¸­çš„tableloader.jsæ–‡ä»¶ï¼Œä»£ç æ®µï¼š
```javascript
    import {DBModelLoader} from 'class2api/dbhelper'
    import _config from './config'
    import DemoUser from './tables/DemoUser'
    
    //æ¨¡åž‹å®šä¹‰ï¼Œåœ¨aloader.initå†…éƒ¨ä¼šåŠ¨æ€åŠ è½½æŒ‡å®šçš„å®šä½æ–‡ä»¶ï¼Œæ›¿æ¢ä¸ºçœŸå®žçš„objectçš„valueå€¼
    export const DataModel = {
        DemoUser: DBModelLoader.define(DemoUser),
    }
    //ç»‘å®šæ¨¡åž‹å…³ç³»æ—¶ï¼Œå¯èƒ½éœ€è¦å®šä¹‰çš„åˆ«å
    export const ass = {
        subComment: "subComment",
        replyToUser: "replyToUser"
    }
    (async()=>{
        await DBModelLoader.INIT(_config.mysql, {model:DataModel, ass})
    })();
```
  
- DBUtils   
æ•°æ®åº“çš„è¾…åŠ©å·¥å…·æ–¹æ³•ï¼š
DBUtils.dumpModelFuns(sequelizeModelClass)  æ‰“å°æŒ‡å®šæ¨¡åž‹ç±»ä¸Šçš„sequelizeæ‰©å±•çš„æ“ä½œè‡ªèº«æ•°æ®å®žä¾‹çš„ã€ä»¥åŠæ“ä½œå…³è”å¯¹è±¡çš„å„ç±»å‡½æ•°æ–¹æ³•

- fn:Function        
sequezeliçš„èšåˆå‡½æ•°å¼•ç”¨

- col:Function       
sequezeliçš„åˆ—å‡½æ•°å¼•ç”¨

- literal:Function   
sqlè¯­å¥å­—é¢é‡åŒ…è£…å‡½æ•°ï¼Œç¡®ä¿sequelizeä¸è§£æžæ­¤SQLå­—ç¬¦ä¸²

- where:Function     
sequezeliçš„whereå‡½æ•°çš„å¼•ç”¨

- createTransaction:Function
åˆ›å»ºä¸€ä¸ªsequezeliäº‹åŠ¡

- excuteSQL(sql,[replaceparam1,replaceparam2,...]) 
æ‰§è¡ŒæŒ‡å®šçš„SQLè¯­å¥ï¼Œä¸€èˆ¬é€‚ç”¨äºŽæ— æ³•ç”¨sequelizeè¡¨è¾¾å¼çš„å¤æ‚æŸ¥è¯¢æˆ–æ›´æ–°æ“ä½œ

## class2api/rulehelper
é€‚ç”¨äºŽåŽå°ç®¡ç†ç³»ç»Ÿçš„èº«ä»½æ£€éªŒã€æƒé™æ ¡éªŒçš„è¾…åŠ©å‡½æ•°åº“

- accessRule({ruleName, ruleDesc})
ç±»é™æ€æ–¹æ³•ä¿®é¥°å™¨,æä¾›åŽå°çº§çš„æƒé™æ ¡éªŒï¼ŒåŒæ—¶ä¸ºå½“å‰ä¿®é¥°çš„ç±»é™æ€æ–¹æ³•æ ‡è®°äº†æƒé™åç§°ã€æè¿°ä¿¡æ¯ã€‚
è¿è¡ŒåŽŸç†ï¼šä¿®é¥°å™¨å†…éƒ¨ä¼šæ‹¦æˆªç±»é™æ€æ–¹æ³•çš„è°ƒç”¨ï¼Œå¹¶å…ˆå‘æƒé™ä¸­å¿ƒè¿›è¡Œèº«ä»½éªŒè¯ï¼Œä»¥åˆ¤æ–­æ˜¯å¦æœ‰æƒé™ç»§ç»­è¿è¡Œå¯¹åº”çš„æ–¹æ³•ã€‚
æƒé™ä¸­å¿ƒä¸ºè¿œç¨‹æœåŠ¡ï¼Œåœ¨class2api.config.jsé…ç½®ä¸­å®šä¹‰ç›¸å…³ä¿¡æ¯ï¼š
```javascript
exports.config = { 
    name: 'courseService', 
    admin_rule_center: { 
 Â  Â  Â  Â auth:"http://127.0.0.1:3002/gkrulemanager/auth", //ç®¡ç†ç”¨æˆ·çš„èº«ä»½éªŒè¯æŽ¥å£
 Â  Â  Â  Â validator: "http://127.0.0.1:3002/gkrulemanager/validate",  //ç®¡ç†ç”¨æˆ·å¯¹æŒ‡å®šæƒé™çš„éªŒè¯æŽ¥å£
        register: "http://127.0.0.1:3002/gkrulemanager/register" //æƒé™é…ç½®è¡¨çš„ä¸Šä¼ æ³¨å†ŒæŽ¥å£ï¼Œåœ¨IDEçŽ¯å¢ƒä¸‹ä½¿ç”¨
    }
}
```
ä¿®é¥°å™¨å‘æƒé™ä¸­å¿ƒçš„æƒé™æ ¡éªŒæŽ¥å£(config.admin_rule_center.validator)æäº¤ä»¥ä¸‹å‚æ•°ä¿¡æ¯ï¼š
1ã€jwtokenï¼šjsonwebtokenç‰ˆçš„ç®¡ç†å‘˜èº«ä»½ç­¾åï¼Œä»Žreqå‚æ•°ä¸­æå–ï¼Œå¹¶åœ¨headerä¸­å‘é€ï¼Œæƒé™ä¸­å¿ƒä¼šè¯†åˆ«è§£å¯†jwtokenï¼Œä»Žè€Œåˆ†è¾¨èº«ä»½å¹¶æ ¡éªŒæƒé™
2ã€categoryNameï¼šæƒé™ç»„åç§°ï¼Œä»ŽmodelSettingä¿®é¥°å™¨çš„é…ç½®ä¿¡æ¯ä¸­èŽ·å¾—
3ã€categoryDescï¼šæƒé™ç»„çš„æè¿°ä¿¡æ¯ï¼Œä»ŽmodelSettingä¿®é¥°å™¨çš„é…ç½®ä¿¡æ¯ä¸­èŽ·å¾—
4ã€ruleNameï¼šæƒé™åç§°ï¼Œä»ŽaccessRuleä¿®é¥°å™¨å‡½æ•°çš„å‚æ•°ä¸­èŽ·å¾—
5ã€ruleDescï¼šæƒé™çš„æè¿°ä¿¡æ¯ï¼Œä»ŽaccessRuleä¿®é¥°å™¨å‡½æ•°çš„å‚æ•°ä¸­èŽ·å¾—
6ã€codePathï¼šä»£ç è·¯å¾„ï¼Œæ ¼å¼å¦‚:ClassA.methodAï¼Œåœ¨æ¡†æž¶å†…éƒ¨èŽ·å¾—
7ã€sysNameï¼šè°ƒç”¨æ–¹ç³»ç»Ÿåç§°ï¼Œåœ¨class2api.config.jsä¸­é…ç½®
```javascript
    class GKModelA {
        constructor() {
            throw 'é™æ€ä¸šåŠ¡åŠŸèƒ½ç±»æ— æ³•å®žä¾‹åŒ–'
        }
     
        @accessRule({ruleName: 'åˆ é™¤æ–‡ç« ', ruleDesc: 'å¯¹æ–‡ç« è¿›è¡Œåˆ é™¤'})
        static async deleteArticle({aID}) {
            //...
            return GKSUCCESS()
        }
    }
```

- parseAdminAccountFromJWToken({jwtoken})
class2apiå†…ç½®çš„ç®¡ç†å‘˜èº«ä»½æ ¡éªŒå‡½æ•°ï¼Œå‡½æ•°å†…å°†jwtokenå‚æ•°ä¼šä»¥headerçš„æ–¹å¼å‘é€ç»™class2api.config.jsä¸­æŒ‡å®šçš„config.admin_rule_center.authæŽ¥å£ï¼ŒauthæŽ¥å£ç«¯è¿”å›žè¯¦ç»†çš„ç”¨æˆ·ä¿¡æ¯ï¼ˆæŒ‰çº¦å®šï¼Œç”¨æˆ·ä¿¡æ¯ä¸­å«æœ‰æ ‡è¯†å”¯ä¸€çš„uIDå±žæ€§ï¼‰

## class2api/testhelper
æµ‹è¯•è¾…åŠ©å‡½æ•°åº“ï¼Œä¸ºäº†æŽ¥è¿‘çœŸå®žçŽ¯å¢ƒï¼Œä»¥åŠç¡®ä¿æŽ¥å£è°ƒç”¨çš„å…¨æµç¨‹ï¼Œclass2apiçš„å•å…ƒæµ‹è¯•åŽŸåˆ™ä¸Šéƒ½ä»¥httpè°ƒç”¨çš„æ–¹å¼æ‰§è¡Œï¼Œè€Œé¿å…ç”¨ç±»è°ƒç”¨ã€‚
æ³¨ï¼šå½“éœ€è¦æµ‹è¯•ä¸šåŠ¡åŠŸèƒ½ç±»æœ¬èº«æ—¶ï¼Œè¿˜æ˜¯å¯ä»¥åœ¨ä¸šåŠ¡ç±»å±‚é¢ç›´æŽ¥è°ƒç”¨ï¼Œä»¥é¿å¼€å¾®æœåŠ¡æ¡†æž¶ä»¥åŠhttpé€šè®¯çš„å¹²æ‰°

- setApiRoot    è®¾å®šå¾®æœåŠ¡APIçš„domainï¼Œåœ¨WebInvokeHeplerå†…éƒ¨éœ€è¦ä½¿ç”¨
- WebInvokeHepler(usertoken)(apiPath, postParams, [apiDesc])      
å‘apiå‘èµ·ä¸€ä¸ªpost-APIè¯·æ±‚ï¼Œ postParamsæ˜¯postçš„JSONå†…å®¹ï¼ŒapiDescæ˜¯APIæ–¹æ³•æè¿°çš„å‡½æ•°å°è£…ï¼ˆåªæ˜¯æé«˜å¯è¯»æ€§ï¼Œæ²¡æœ‰å®žé™…åŠŸèƒ½æ„ä¹‰ï¼‰ï¼Œå£°æ˜Žäº†apiDescçš„è°ƒç”¨çš„è¯·æ±‚çš„postä¸Žresç»“æžœæ•°æ®ï¼Œå°†è¢«å†…éƒ¨ç¼“å­˜ï¼Œä¾›save2Docä½¿ç”¨ä¿å­˜è¾“å‡º
- ApiDesc       APIæ–¹æ³•æè¿°çš„å‡½æ•°å°è£…ï¼Œåªæ˜¯æé«˜åœ¨çœŸå®žå…¥å‚åˆ—è¡¨ä¸­çš„å¯è¯»æ€§ï¼Œæ²¡æœ‰å®žé™…åŠŸèƒ½æ„ä¹‰
- save2Doc      ä¿å­˜æœ¬æ¬¡mochaç”¨ä¾‹ä¸­æ‰€æœ‰æä¾›äº†ApiDescå‚æ•°çš„APIè¯·æ±‚çš„postå…¥å‚ä¸Žresè¿”å›žç»“æžœ
```javascript
    //testhelperçš„æœ€å°åŒ–æ¡ˆä¾‹ 
    import {ApiDesc, WebInvokeHepler, setApiRoot, save2Doc} from 'class2api/testhelper'
    
    let _run = {
        accounts: {
            user1: {
                token: 'token-111'
            }
        }
    };
    //é€šè¿‡setApiRootï¼Œé™¤äº†æœ¬åœ°å¼€å‘çŽ¯å¢ƒï¼Œè¿˜å¯ä»¥è°ƒç”¨æµ‹è¯•çŽ¯å¢ƒã€æ­£å¼çŽ¯å¢ƒçš„æŽ¥å£ï¼Œè¿™ä¼šå¸¦æ¥æžå¤§çš„çº¿ä¸ŠæŽ’æŸ¥ä¸Žæ ¡éªŒçš„ä¾¿åˆ©æ€§
    const remote_api = process.env.ONLINE==='1'? `https://comment_api_test.gankao.com`
        :(process.env.ONLINE==='2'? `https://comment_api.gankao.com`
            :`http://127.0.0.1:3002`);
    //é…ç½®è¿œç¨‹è¯·æ±‚endpoint
    setApiRoot(remote_api);
    
    describe('è¯„è®ºç³»ç»Ÿ', function () {
     
        after(function () {
            save2Doc({save2File:'api.MD'})
        }); 
    
        it('/a/hello', async () => {
            let response = await WebInvokeHepler(_run.accounts.user1)('/a/hello',
                {name: "haungyong"},
                ApiDesc(`helloæµ‹è¯•æ–¹æ³•`)
            )
            let {err, result} = response
            let {message} = result
            message.lastIndexOf('haungyong').should.be.above(-1)
        }) 
    
    })
   
```


$ npm publish --registry=http://registry.npmjs.org  --  



